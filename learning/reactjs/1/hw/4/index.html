<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Calculator</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.0/react.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.0/react-dom.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.6.15/browser.js"></script>
</head>
<body>

    <div id="content"></div>

    <script type="text/babel">

        const FIRST_NUMBER_ID = 'first-number';
        const SECOND_NUMBER_ID = 'second-number';


        var Calculator = React.createClass({

            state : {},

            getInitialState : function () {
                return {
                    result : null,
                    operator : '+'
                };
            },

            setValue : function (event) {
                this.state[event.target.id] = event.target.value;
                this.setState(this.state);
            },

            calculate : function () {
                var result = null;
                var number1 = parseFloat(this.state[FIRST_NUMBER_ID]);
                var number2 = parseFloat(this.state[SECOND_NUMBER_ID]);
                if (isNaN(number1) || isNaN(number2)) {
                    alert('Нужно ввести число');
                    this.setState({result : result});
                    return;
                }
                switch (this.state.operator) {
                    case '+' : result = number1 + number2; break;
                    case '-' : result = number1 - number2; break;
                    case '*' : result = number1 * number2; break;
                    case '/' :
                        if (number2 === 0) {
                            alert('На ноль делить нельзя');
                        } else {
                            result = number1 / number2; break;
                        }
                }
                this.setState({result : result});
            },

            render : function () {
                var result = null;
                const resultStyle = {margin : '0 15px;'};
                if (this.state.result !== null) {
                    result = <strong style={resultStyle}>{this.state.result}</strong>
                }
                const inputStyle = {width: '85px', margin: '0 20px'};
                return <div>
                        <input type="number" style={inputStyle} id={FIRST_NUMBER_ID} onChange={this.setValue} />
                        <select name="operator" id="operator" onChange={this.setValue}>
                            <option value="+">+</option>
                            <option value="-">-</option>
                            <option value="*">*</option>
                            <option value="/">/</option>
                        </select>
                        <input type="number" style={inputStyle} id={SECOND_NUMBER_ID} onChange={this.setValue} />
                        <button onClick={this.calculate} >=</button>
                        {result}
                    </div>;
            }
        });

        ReactDOM.render(
            <Calculator />,
            document.getElementById('content')
        );
    </script>

</body>
</html>