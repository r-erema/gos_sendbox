# This file is managed by ansible, don't make changes here - they will be overwritten.

index praca_vacancies {
    type = rt
    path = /var/sphinx/data/praca-vacancies
    charset_table = 0..9, A..Z->a..z, a..z, \
        U+410..U+42F->U+430..U+44F, U+430..U+44F, U+401->U+451, U+451->U+0435
    blend_chars = +, \#, &
    morphology = none
    wordforms = /var/sphinx/wordforms.txt

    rt_field = title_ft
    rt_field = specialities_ft
    rt_field = city_ft
    rt_field = address_ft
    rt_field = description_ft
    rt_field = shadow_ft
    rt_field = organization_name_ft
    rt_field = organization_industries_ft

    rt_attr_uint = organization_id
    rt_attr_uint = owner_user_id
    rt_attr_uint = address_id
    rt_attr_uint = age_from
    rt_attr_uint = age_to
    rt_attr_uint = show_contacts
    rt_attr_uint = allow_proposals
    rt_attr_uint = is_active
    rt_attr_uint = is_premium

    rt_attr_uint = type
    rt_attr_uint = visibility
    rt_attr_uint = gender
    rt_attr_uint = education_vac
    rt_attr_uint = experience_vac
    rt_attr_uint = student
    rt_attr_uint = city

    rt_attr_bigint = salary_fr_usd
    rt_attr_bigint = salary_fr_eur
    rt_attr_bigint = salary_fr_byr
    rt_attr_bigint = salary_fr_rub

    rt_attr_float = latitude
    rt_attr_float = longitude

    rt_attr_timestamp = created_time
    rt_attr_timestamp = updated_time
    rt_attr_timestamp = upped_time
    rt_attr_timestamp = actualized_time

    rt_attr_multi = schedule
    rt_attr_multi = occupation
    rt_attr_multi = nature
    rt_attr_multi = specialities
    rt_attr_multi = cities

    html_strip = 1
}

index praca_resumes {
    type = rt
    path = /var/sphinx/data/praca-resumes
    charset_table = 0..9, A..Z->a..z, a..z, \
        U+410..U+42F->U+430..U+44F, U+430..U+44F, U+401->U+451, U+451->U+0435
    blend_chars = +, \#, &
    morphology = none
    wordforms = /var/sphinx/wordforms.txt

    rt_field = full_name_ft
    rt_field = position_ft
    rt_field = specialities_ft
    rt_field = description_ft
    rt_field = cities_ft
    rt_field = shadow_ft
    rt_field = educations_ft
    rt_field = languages_ft
    rt_field = jobs_ft
    rt_field = software_ft

    rt_attr_uint = owner_user_id
    rt_attr_uint = birthdate_from
    rt_attr_uint = birthdate_to
    rt_attr_uint = has_photo
    rt_attr_uint = show_contacts
    rt_attr_uint = is_active

    rt_attr_uint = gender
    rt_attr_uint = migration
    rt_attr_uint = private_auto
    rt_attr_uint = driver_license
    rt_attr_uint = education
    rt_attr_uint = experience
    rt_attr_uint = student_res
    rt_attr_uint = city

    rt_attr_bigint = salary_sort
    rt_attr_bigint = salary_to_usd
    rt_attr_bigint = salary_to_eur
    rt_attr_bigint = salary_to_byr
    rt_attr_bigint = salary_to_rub

    rt_attr_timestamp = created_time
    rt_attr_timestamp = updated_time
    rt_attr_timestamp = upped_time
    rt_attr_timestamp = actualized_time

    rt_attr_multi = schedule
    rt_attr_multi = occupation
    rt_attr_multi = nature
    rt_attr_multi = driver_license_categories
    rt_attr_multi = specialities
    rt_attr_multi = cities
    rt_attr_multi = languages

    html_strip = 1
}

index praca_suggest {
    type = rt
    dict = keywords
    path = /var/sphinx/data/praca-suggest
    charset_table = 0..9, A..Z->a..z, a..z, \
        U+410..U+42F->U+430..U+44F, U+430..U+44F, U+401->U+451, U+451->U+0435
    blend_chars = +, \#, &
    min_word_len = 3
    min_prefix_len = 3

    rt_field = title_ft
    rt_attr_string = title
    rt_attr_uint = type
}

index praca_organizations {
    type = rt
    path = /var/sphinx/data/praca-organizations
    morphology = none
    wordforms = /var/sphinx/wordforms.txt
}

index words_trigrams {
    type = rt
    path = /var/sphinx/data/words-trigrams
    charset_table = 0..9, A..Z->a..z, a..z, \
        U+410..U+42F->U+430..U+44F, U+430..U+44F, U+401->U+451, U+451

   rt_field = trigrams_ft
   rt_field = keyword_ft
   rt_attr_uint = freq
   rt_attr_uint = len
   rt_attr_string = keyword
}

indexer
{
    mem_limit = 512M
}

searchd
{
    listen = 3312
    listen = 9306:mysql41

    log         = /var/log/sphinxsearch/searchd.log
    query_log   = /var/log/sphinxsearch/query.log
    binlog_path = /var/lib/sphinxsearch/data

    read_timeout = 5

    max_children = 100
    workers=threads
    pid_file = /var/run/sphinxsearch/searchd.pid  #/var/run/searchd.pid
    thread_stack = 256K

    #max_matches = 10000
    #compat_sphinxql_magics = 0
}